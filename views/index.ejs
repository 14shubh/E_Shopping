<!DOCTYPE html>
<html lang="en">
  <head>
    <title><%=title%></title>

    <!-- Bootstrap core CSS -->
    <%- include('partial/bootstrap.ejs')%>

    <link rel="stylesheet" href="css/userStyle.css" />
    <link rel="stylesheet" href="css/userHomeStyle.css" />
    <!-- <link href="carousel.css" rel="stylesheet" /> -->
  </head>

  <body>

    <header><%-include('partial/navigation_bar.ejs')%></header>

    <main>
      <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img
              src="/images/slide_5.jpg"
              class="d-block w-100 h-100"
              alt="..."
            />

            <div class="container">
              <div class="carousel-caption text-left">
                <h1>Explore Everything.</h1>
                <p>
                  Cras justo odio, dapibus ac facilisis in, egestas eget quam.
                  Donec id elit non mi porta gravida at eget metus. Nullam id
                  dolor id nibh ultricies vehicula ut id elit.
                </p>
                <p>
                  <a class="btn btn-lg btn-outline-dark" href="/signup" role="button"
                    >Sign up today</a
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <!-- <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" role="img" focusable="false">
            <rect width="100%" height="100%" fill="#777" /></svg> -->
            <img
              src="/images/slide_3.jpg"
              class="d-block w-100 h-100"
              alt="..."
            />

            <div class="container">
              <div class="carousel-caption">
                <h1>Another example headline.</h1>
                <p>
                  Cras justo odio, dapibus ac facilisis in, egestas eget quam.
                  Donec id elit non mi porta gravida at eget metus. Nullam id
                  dolor id nibh ultricies vehicula ut id elit.
                </p>
                <p>
                  <a class="btn btn-lg btn-outline-dark" href="#" role="button"
                    >Learn more</a
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <!-- <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" role="img" focusable="false">
            <rect width="100%" height="100%" fill="#777" /></svg> -->

            <img
              src="/images/slide_2.jpg"
              class="d-block w-100 h-100"
              alt="..."
            />

            <div class="container">
              <div class="carousel-caption text-right">
                <h1>One more for good measure.</h1>
                <p>
                  Cras justo odio, dapibus ac facilisis in, egestas eget quam.
                  Donec id elit non mi porta gravida at eget metus. Nullam id
                  dolor id nibh ultricies vehicula ut id elit.
                </p>
                <p>
                  <a class="btn btn-lg btn-outline-light" href="#" role="button"
                    >Browse gallery</a
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
        <a
          class="carousel-control-prev"
          href="#myCarousel"
          role="button"
          data-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a
          class="carousel-control-next"
          href="#myCarousel"
          role="button"
          data-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </main>
      <div class="container category">
        <nav class="navbar navbar-expand-md navbar-dark">
          <div class="m-auto">
            <ul class="navbar-nav m-auto mb-2 mb-md-0">
              <%for(i=0; i < CategoryList.length; i++){%> <%if(i<=6){%>
              <li class="nav-item active">
                <a
                  class="nav-link"
                  href="/product/view_product/<%=CategoryList[i].id%>"
                  ><%=CategoryList[i].category_Name%></a
                >
              </li>
              <%}else{%> <%break;%> <%}%> <%}%>
            </ul>
          </div>
        </nav>
      </div>
      <div class="container-fluid products">
        <div class="headingAllProduct mt-5 text-center">
          <h1>All <span>Products</span></h1>
          <div class="border"></div>
        </div>
        <div class="row">
          <%for(Product of ProductList){%>
          <div class="col-md-3">
            <div class="card">
              <img
                src="/products_images/<%=Product.product_Image1%>"
                class="card-img-top"
                alt=""
              />
              <div class="card-body">
                <h5 class="card-title"><%=Product.product_Name%></h5>
                <span
                  ><small>3.9<i class="fa-regular fa-star"> </i></small
                  >(<%=Product.quantity%>)</span
                >
                <p>₹ <%=Product.price%> <small>-20%</small></p>
                <!-- <p class="card-text">₹ <%=Product.price%> -20%</p> -->

                <!-- <a href="#" class="btn btn-primary">View item</a> -->
                <!-- <%if(Product.id){%>
                <a href="#" onchange="addToCart(this,'<%=isLoggedIn%>','<%=Product.id%>')"
                  ><i class="fa-solid fa-cart-arrow-down"></i
                ></a>
                <%}else{%>
                <a href="#" onchange="addToCart(this,'<%=isLoggedIn%>','<%=Product.id%>')"
                  ><i class="fa-regular fa-cart-circle-xmark"></i
                ></a>
                <%}%>
                <a href="#"><i class="fa-regular fa-heart"></i></a> -->
                <!-- <div>
                  <%if(Product.product_id){%>
                  <button
                    onclick="addToCart(this,'<%=isLoggedIn%>','<%=Product.id%>')"
                    class="cart-btn"
                  >
                  Add to cart  <i class="fa-solid fa-cart-arrow-down"></i>
                  </button>
                  <%}else{%>
                  <button
                    onclick="addToCart(this,'<%=isLoggedIn%>','<%=Product.id%>')"
                    class="cart-btn"
                  >
                  Remove <i class="fa-solid fa-cart-arrow-down"></i>
                  </button>
                  <%}%>
                </div> -->

                <div>
                  <%if(Product.product_id){%>
                    <button onclick="addToCart(this,'<%=isLoggedIn%>','<%=Product.id%>')" class="cart-btn">Remove</button>
                  <%}else{%>  
                    <button onclick="addToCart(this,'<%=isLoggedIn%>','<%=Product.id%>')" class="cart-btn">Add To Cart</button>
                  <%}%>
                  <!-- <button class="btn btn-success">Favorite</button> -->
                </div> 
                <a href="#"><i class="fa-regular fa-heart"></i></a>
              </div>
            </div>
          </div>
          <%}%>
        </div>
      </div>
      <!-- FOOTER Begin -->
      <footer class="container">
        <p class="float-right"><a href="#">Back to top</a></p>
        <p>
          &copy; 2017-2020 Company, Inc. &middot;
          <a href="#">Privacy</a> &middot; <a href="#">Terms</a>
        </p>
      </footer>
    

      <script>
        function addToCart(button,isLoggedIn,pid){
          if(isLoggedIn){
            var buttonText = button.innerText;
            if(buttonText == "Add To Cart"){
              $.ajax({
                url: "/cart/add-cart/"+pid,
                success: function(result){
                  alert("Item Added In Cart");
                  button.innerText = "Remove";
                }
              });
              
            }
            else if(buttonText == "Remove"){
              $.ajax({
                url: "/cart/remove-cart/"+pid,
                success: function(result){
                  alert("Product Removed From Cart");
                  button.innerText = "Add To Cart";
                }
              });
            }
          }
          else
            window.location.href = "/signin";
        }
      </script>
  </body>
</html>
